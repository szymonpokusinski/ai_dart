<div class="grid grid-cols-2 gap-4">
  <div (click)="openModal('type')"
       class="relative flex flex-col p-6 bg-[#161618]/40 backdrop-blur-2xl rounded-[2.2rem] border border-white/[0.04] active:scale-95 transition-all">
    <span class="text-[9px] font-black text-white/20 uppercase tracking-[0.2em] mb-1">Dystans</span>
    <span class="text-xl font-light text-white italic tracking-tighter">{{ selectedType }}</span>
  </div>

  <div (click)="openModal('rule')"
       class="relative flex flex-col p-6 bg-[#161618]/40 backdrop-blur-2xl rounded-[2.2rem] border border-white/[0.04] active:scale-95 transition-all">
    <span class="text-[9px] font-black text-white/20 uppercase tracking-[0.2em] mb-1">Finisz</span>
    <span class="text-sm font-bold text-white tracking-tight">{{ selectedRule }}</span>
  </div>
</div>

@if (isModalOpen) {
  <div class="fixed inset-0 z-[100] flex items-center justify-center p-6">

    <div class="absolute inset-0 bg-black/70 backdrop-blur-md" (click)="closeModal()"></div>

    <div class="relative w-full max-w-[340px] bg-[#0c0c0e]/80 backdrop-blur-3xl rounded-[2.8rem] border border-white/[0.08] shadow-[0_25px_50px_-12px_rgba(0,0,0,0.8)] overflow-hidden animate-in fade-in zoom-in-95 duration-200">

      <div class="absolute inset-x-12 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>

      <div class="relative p-7">
        <div class="mb-8 text-center">
          <span class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/30">
            Ustawienia
          </span>
        </div>

        <div class="space-y-2">
          @for (option of currentOptions; track option) {
            <div (click)="selectOption(option)"
                 class="relative cursor-pointer group active:scale-[0.98] transition-all">

              <div class="absolute inset-0 rounded-[1.4rem] transition-all duration-300"
                   [class]="isSelected(option)
                      ? 'bg-blue-600/90 shadow-[0_0_20px_rgba(37,99,235,0.2)]'
                      : 'bg-white/[0.03] border border-white/[0.03] group-hover:bg-white/[0.06]'">
              </div>

              <div class="relative h-14 flex items-center justify-center">
                <span class="text-[11px] font-bold uppercase tracking-[0.15em] transition-colors"
                      [class.text-white]="isSelected(option)"
                      [class.text-white/20]="!isSelected(option)">
                {{ option }}
                </span>
              </div>
            </div>
          }
        </div>

        <button (click)="closeModal()"
                class="w-full mt-8 h-12 flex items-center justify-center active:scale-95 transition-all">
          <span class="text-[9px] font-bold uppercase tracking-[0.2em] text-white/10 hover:text-white/30">Anuluj</span>
        </button>
      </div>
    </div>
  </div>
}
